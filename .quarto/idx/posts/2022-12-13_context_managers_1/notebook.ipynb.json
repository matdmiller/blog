{"title":"Context Managers","markdown":{"yaml":{"title":"Context Managers","author":"Mat Miller","date":"12/13/2022","categories":["python","code","today I learned"],"image":"python_learning_to_code_1_512.png","card-style":"summary","twitter-card":{"creator":"@matdmiller","card-style":"summary_large_image"},"format":{"html":{"number-sections":true,"toc":true,"code-fold":false,"self-contained":true}}},"containsRefs":false,"markdown":"\n\n[![Open in Google Colab](https://colab.research.google.com/assets/colab-badge.png)](https://colab.research.google.com/github/matdmiller/blog/blob/main/posts/2022-12-13_context_managers_1/notebook.ipynb)<br>\nThis is a quick 'today I learned' (TIL) note on Python Context managers. Python context managers are used to wrap arbitrary code with entry (setup) and exit (cleanup) functions. One common places you'll see them used is when reading data from a file. \n\nIf we try and read from the file `f`, defined above, we will get an I/O exception because the file as already been closed.\n\nHere is the equivalent long hand way to read the data from the file:\n\nAs you can see the syntax is more verbose, it would be easier to forget to close the file, and it's much less clear to see at a glance when we're operating on the file. This example is relatively trivial as we're just reading all the lines of the text file into a list but you can probably imagine this could be a lot more complex if you were doing something more complicated like training a neural net.\n\nNow let's write our own class that uses a conext manager to cement how they can be implemented.\n\nAs you can see the enter message was printed, the `__enter__` return value was passed and then the exit message was printed. Now let's see what happens if there is an error while within our context.\n\nAs you can see an error was thrown but the `__exit__` function was run anyways.\n\nThere are many other ways you can implement and use context managers which you can read about here: [Python Conext Managers](https://docs.python.org/3/library/contextlib.html#single-use-reusable-and-reentrant-context-managers). Hopefully I've given you a taste of what's possible and given you a basic understanding of they they're useful.\n\nHere are a few more examples for your reference:\n\nExample 1: Using the `contextmanager` decorator\n\nExample 2: Using `ContextDecorator`\n","srcMarkdownNoYaml":"\n\n[![Open in Google Colab](https://colab.research.google.com/assets/colab-badge.png)](https://colab.research.google.com/github/matdmiller/blog/blob/main/posts/2022-12-13_context_managers_1/notebook.ipynb)<br>\nThis is a quick 'today I learned' (TIL) note on Python Context managers. Python context managers are used to wrap arbitrary code with entry (setup) and exit (cleanup) functions. One common places you'll see them used is when reading data from a file. \n\nIf we try and read from the file `f`, defined above, we will get an I/O exception because the file as already been closed.\n\nHere is the equivalent long hand way to read the data from the file:\n\nAs you can see the syntax is more verbose, it would be easier to forget to close the file, and it's much less clear to see at a glance when we're operating on the file. This example is relatively trivial as we're just reading all the lines of the text file into a list but you can probably imagine this could be a lot more complex if you were doing something more complicated like training a neural net.\n\nNow let's write our own class that uses a conext manager to cement how they can be implemented.\n\nAs you can see the enter message was printed, the `__enter__` return value was passed and then the exit message was printed. Now let's see what happens if there is an error while within our context.\n\nAs you can see an error was thrown but the `__exit__` function was run anyways.\n\nThere are many other ways you can implement and use context managers which you can read about here: [Python Conext Managers](https://docs.python.org/3/library/contextlib.html#single-use-reusable-and-reentrant-context-managers). Hopefully I've given you a taste of what's possible and given you a basic understanding of they they're useful.\n\nHere are a few more examples for your reference:\n\nExample 1: Using the `contextmanager` decorator\n\nExample 2: Using `ContextDecorator`\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":false,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"jupyter"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":false,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","number-sections":true,"toc":true,"self-contained":true,"output-file":"notebook.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.7.32","editor":{"render-on-save":true},"theme":"lux","title-block-banner":true,"title":"Context Managers","author":"Mat Miller","date":"12/13/2022","categories":["python","code","today I learned"],"image":"python_learning_to_code_1_512.png","card-style":"summary","twitter-card":{"creator":"@matdmiller","card-style":"summary_large_image"}},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}