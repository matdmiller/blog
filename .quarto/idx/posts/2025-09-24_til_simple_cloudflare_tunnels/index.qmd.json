{"title":"TIL: Setup Cloudflare Tunnels In One Line of Code","markdown":{"yaml":{"title":"TIL: Setup Cloudflare Tunnels In One Line of Code","author":"Mat Miller","date":"09/24/2025","categories":["til","cloudflare","apps","free hosting"],"image":"cover.png","card-style":"summary","format":{"html":{"number-sections":true,"toc":true,"code-fold":false,"self-contained":true,"code-overflow":"wrap"}}},"headingText":"How to Run Cloudflare Tunnels in One Line of Code","containsRefs":false,"markdown":"\n\n\nThis quick guide shows how to set up Cloudflared tunnels in a single command in User Space. \nThis means you can run it without root permissions linux environment or Docker container including places like \n[Solve-It](https://solveit.fast.ai), [Modal](https://modal.com), [Lambda Labs](https://lambda.ai), etc. \nThis gives you a secure way to access your web apps securely from anywhere using your own domain with no network configuration needed.\n\n## TL;DR\nRun this command if you already set up your tunnel token `TUNNEL_TOKEN` in your environment variables which is recommended.\n```bash\ncurl -L -o cloudflared https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64 && chmod +x cloudflared && ./cloudflared tunnel run\n```\nRun this command if you don't have your tunnel token set up in your environment variables and need to include it in the command.\n```bash\ncurl -L -o cloudflared https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64 && chmod +x cloudflared && ./cloudflared tunnel run --token 'YOUR_TOKEN_HERE'\n```\n\n## Prerequisites\n- A free Cloudflare account with a domain name registered with Cloudflare\n- A Cloudflare tunnel token from your Zero Trust dashboard\n- Access to a running linux environment with user permissions\n\n## Steps\n\n### Step 1: Download Cloudflared\nFirst, identify your system architecture and download the appropriate binary. You will most likely be running this on a x86_64 Linux architecture. \nIf you want to run on a different architecture, you can find the list of binary options [here](https://github.com/cloudflare/cloudflared/releases/latest/).\n\n```bash\n# Download cloudflared (Linux x86_64)\ncurl -L -o cloudflared https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64\n```\n### Step 2: Make it executable\n```bash\n# Make it executable (in Linux)\nchmod +x cloudflared\n```\n\n### Step 3: (If Required) Set Your Tunnel Token\nIf you are running this in the cloud in services like Solve-It, Modal, Lambda Labs, etc. you should set your tunnel token environment variable\nin the service's settings for environment variable secrets. This provides a secure way to store your token without having to keep it in your code. \nIf you need to manually set the token, you can do so with the following command. \nReplace `YOUR_TUNNEL_TOKEN` with your actual token from Cloudflare. \n\n```bash\nexport TUNNEL_TOKEN=\"YOUR_TUNNEL_TOKEN\"\n```\n\n### Step 4: Run Cloudflared\nI suggest running the tunnel in the foreground in tmux if possible. You can start a tmux session by running `tmux` if it's installed on your system. \nThis allows you to view the logs and easily kill the process as needed and it stays running after you close your terminal. \nIf you don't have tmux installed, you can run the tunnel in the foreground by running the following command.\n\n```bash\n./cloudflared tunnel run\n```\nIf you want to run the tunnel in the background, you can run the following command.\n```bash\nnohup ./cloudflared tunnel run > cloudflared.log 2>&1 &\n```\n\nThat's it! Your tunnel should now be active and visible in your Cloudflare dashboard.\n\n## Configure Your Application\n\nNext you will need to configure your application in the Cloudflare dashboard. You will find this page under Zero Trust -> Networks -> Tunnels. \nSelect the tunnel you want to configure. You can only run one instance of a tunnel at a time so if you plan on running multiple instances of \nthe tunnel, you will need to create a separate tunnel with a separate token. You can however run multiple applications on the same tunnel. \n\n![Add Route Button in Cloudflare Dashboard](add_route_button.png)\n![Add Route Page in Cloudflare Dashboard](add_route_page.png)\n\n\n\n## Notes\n- You should set up security for your tunnel and applications. You can do this under the Zero Trust -> Access -> Applications page. You can \nfine more information in my [previous post](https://blog.matmiller.com/posts/2024-12-29_host_apps_locally_free/). This post contains a much more detailed \nguide on how to set up security and other settings for your tunnel and applications. It also provides many ideas for applications you can run through your tunnel.\n- The advantage of running a cloudflared tunnel like this is that you don't need to install it, you simply download and run a single binary file and it just works.\n- Check out the [Cloudflare Tunnels documentation](https://developers.cloudflare.com/cloudflare-one/connections/connect-networks/) for more information.\n- To run it in the background in a long running Modal function, you can just wrap the one line command in `subprocess.Popen`.\n","srcMarkdownNoYaml":"\n\n# How to Run Cloudflare Tunnels in One Line of Code\n\nThis quick guide shows how to set up Cloudflared tunnels in a single command in User Space. \nThis means you can run it without root permissions linux environment or Docker container including places like \n[Solve-It](https://solveit.fast.ai), [Modal](https://modal.com), [Lambda Labs](https://lambda.ai), etc. \nThis gives you a secure way to access your web apps securely from anywhere using your own domain with no network configuration needed.\n\n## TL;DR\nRun this command if you already set up your tunnel token `TUNNEL_TOKEN` in your environment variables which is recommended.\n```bash\ncurl -L -o cloudflared https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64 && chmod +x cloudflared && ./cloudflared tunnel run\n```\nRun this command if you don't have your tunnel token set up in your environment variables and need to include it in the command.\n```bash\ncurl -L -o cloudflared https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64 && chmod +x cloudflared && ./cloudflared tunnel run --token 'YOUR_TOKEN_HERE'\n```\n\n## Prerequisites\n- A free Cloudflare account with a domain name registered with Cloudflare\n- A Cloudflare tunnel token from your Zero Trust dashboard\n- Access to a running linux environment with user permissions\n\n## Steps\n\n### Step 1: Download Cloudflared\nFirst, identify your system architecture and download the appropriate binary. You will most likely be running this on a x86_64 Linux architecture. \nIf you want to run on a different architecture, you can find the list of binary options [here](https://github.com/cloudflare/cloudflared/releases/latest/).\n\n```bash\n# Download cloudflared (Linux x86_64)\ncurl -L -o cloudflared https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64\n```\n### Step 2: Make it executable\n```bash\n# Make it executable (in Linux)\nchmod +x cloudflared\n```\n\n### Step 3: (If Required) Set Your Tunnel Token\nIf you are running this in the cloud in services like Solve-It, Modal, Lambda Labs, etc. you should set your tunnel token environment variable\nin the service's settings for environment variable secrets. This provides a secure way to store your token without having to keep it in your code. \nIf you need to manually set the token, you can do so with the following command. \nReplace `YOUR_TUNNEL_TOKEN` with your actual token from Cloudflare. \n\n```bash\nexport TUNNEL_TOKEN=\"YOUR_TUNNEL_TOKEN\"\n```\n\n### Step 4: Run Cloudflared\nI suggest running the tunnel in the foreground in tmux if possible. You can start a tmux session by running `tmux` if it's installed on your system. \nThis allows you to view the logs and easily kill the process as needed and it stays running after you close your terminal. \nIf you don't have tmux installed, you can run the tunnel in the foreground by running the following command.\n\n```bash\n./cloudflared tunnel run\n```\nIf you want to run the tunnel in the background, you can run the following command.\n```bash\nnohup ./cloudflared tunnel run > cloudflared.log 2>&1 &\n```\n\nThat's it! Your tunnel should now be active and visible in your Cloudflare dashboard.\n\n## Configure Your Application\n\nNext you will need to configure your application in the Cloudflare dashboard. You will find this page under Zero Trust -> Networks -> Tunnels. \nSelect the tunnel you want to configure. You can only run one instance of a tunnel at a time so if you plan on running multiple instances of \nthe tunnel, you will need to create a separate tunnel with a separate token. You can however run multiple applications on the same tunnel. \n\n![Add Route Button in Cloudflare Dashboard](add_route_button.png)\n![Add Route Page in Cloudflare Dashboard](add_route_page.png)\n\n\n\n## Notes\n- You should set up security for your tunnel and applications. You can do this under the Zero Trust -> Access -> Applications page. You can \nfine more information in my [previous post](https://blog.matmiller.com/posts/2024-12-29_host_apps_locally_free/). This post contains a much more detailed \nguide on how to set up security and other settings for your tunnel and applications. It also provides many ideas for applications you can run through your tunnel.\n- The advantage of running a cloudflared tunnel like this is that you don't need to install it, you simply download and run a single binary file and it just works.\n- Check out the [Cloudflare Tunnels documentation](https://developers.cloudflare.com/cloudflare-one/connections/connect-networks/) for more information.\n- To run it in the background in a long running Modal function, you can just wrap the one line command in `subprocess.Popen`.\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":false,"code-overflow":"wrap","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","number-sections":true,"toc":true,"self-contained":true,"output-file":"index.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.7.32","editor":{"render-on-save":true},"theme":"lux","title-block-banner":true,"title":"TIL: Setup Cloudflare Tunnels In One Line of Code","author":"Mat Miller","date":"09/24/2025","categories":["til","cloudflare","apps","free hosting"],"image":"cover.png","card-style":"summary"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}